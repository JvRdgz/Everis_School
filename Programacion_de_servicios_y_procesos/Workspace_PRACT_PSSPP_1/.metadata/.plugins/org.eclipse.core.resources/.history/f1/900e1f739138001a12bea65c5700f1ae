package clases;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;

public class Servidor {

	private final int PUERTO = 1234;
	private final String HOST = "localhost";
	protected String mensajeServidor;
	private ServerSocket ss;
	private Socket cs;
	private DataOutputStream salidaCliente;

	public void inicarServidor() {
		try {
			ss = new ServerSocket(PUERTO);

			while (true) {
				cs = null;
				System.out.println("Esperando conexion...");
				cs = ss.accept();

				System.out.println("Cliente en linea");

				salidaCliente = new DataOutputStream(cs.getOutputStream());

				salidaCliente.writeUTF("Peticion recibida y aceptada");

				BufferedReader entrada = new BufferedReader(new InputStreamReader(cs.getInputStream()));

				System.out.println("\n\tHola! En que podemos ayudar");
				
				do {
					mensajeServidor = entrada.readLine();
					
					if (mensajeServidor != null)
						System.out.println(mensajeServidor);
					
				} while (mensajeServidor != null);
				System.out.println("Fin de la conexion.");
				ss.close();
			}
		} catch (IOException e) {
			System.err.println("\nERROR.");
			e.printStackTrace();
		}
	}
}
